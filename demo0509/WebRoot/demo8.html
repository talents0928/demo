<!DOCTYPE html>
<html>
  <head>
    <title>demo for creatjs</title>
	
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="x-dns-prefetch-control" content="on" />
	<meta name="viewport" content="width=device-width,initial-scale=0.5,user-scalable=0" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no, email=no" />
	<meta name="x5-orientation" content="portrait">
	<meta name="x5-fullscreen" content="true">
	<meta name="x5-page-mode" content="app">
	<meta name="msapplication-tap-highlight" content="no">
    
    <script type="text/javascript" src='js/require.min.js'></script>
	<script type="text/javascript" src='js/jquery-1.10.2.min.js'></script>
	<script type="text/javascript" src='js/utils.js'></script>
	<link rel='stylesheet' href='css/common.css'></link>

  </head>
  
  <body>
    
	
	<style type="text/css">
			.gbox{
				background:white;
			}
			.circle{
				width: 50px;height:50px;
				border-radius : 50%;
				background : red ;
				position : absolute;
			}
	</style>
		<div class='full oh pr' style='background:wheat ;'>
		
			<div class='circle pa' style='top:50px;left:50px;'></div>
		</div>
  </body>
  
  <script type='text/javascript' >
  	
	
	
	(function(){
		var lastTime = 0;
		var prefixes = 'webkit moz ms o'.split(' '); //各浏览器前缀
		
		var requestAnimationFrame = window.requestAnimationFrame;
		var cancelAnimationFrame = window.cancelAnimationFrame;
		
		var prefix;
		//通过遍历各浏览器前缀，来得到requestAnimationFrame和cancelAnimationFrame在当前浏览器的实现形式
		for( var i = 0; i < prefixes.length; i++ ) {
		    if ( requestAnimationFrame && cancelAnimationFrame ) {
		      break;
		    }
		    prefix = prefixes[i];
		    requestAnimationFrame = requestAnimationFrame || window[ prefix + 'RequestAnimationFrame' ];
		    cancelAnimationFrame  = cancelAnimationFrame  || window[ prefix + 'CancelAnimationFrame' ] || window[ prefix + 'CancelRequestAnimationFrame' ];
		}
		
		//如果当前浏览器不支持requestAnimationFrame和cancelAnimationFrame，则会退到setTimeout
		if ( !requestAnimationFrame || !cancelAnimationFrame ) {
		    requestAnimationFrame = function( callback, element ) {
		      var currTime = new Date().getTime();
		      //为了使setTimteout的尽可能的接近每秒60帧的效果
		      var timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) ); 
		      var id = window.setTimeout( function() {
		        callback( currTime + timeToCall );
		      }, timeToCall );
		      lastTime = currTime + timeToCall;
		      return id;
		    };
		    
		    cancelAnimationFrame = function( id ) {
		      window.clearTimeout( id );
		    };
		}
		
		//得到兼容各浏览器的API
		window.requestAnimationFrame = requestAnimationFrame; 
		window.cancelAnimationFrame = cancelAnimationFrame;
	})();
	
	
	ut.point = "<div style='width:1px;height:1px;background:red;position:absolute;z-index:999'></div>";
	
	ut.drawPoint = function(x,y){
		$(ut.point).css({'top' : y+'px','left':x+'px'}).appendTo(body);
	};
	
	ut.ready(function(){

		ut.client.setBox(640,1008);
//		setTimeout(function(){
//			ut.moveJs($('.circle').get(0)).set('top','400px').duration(2000).end();
//		},0);
		console.log($.Velocity)
		$('.circle').
			velocity({'translateY':600},2000,function(){console.log(1)}).
			velocity({'left':'300px'},4000,function(){console.log(2)}).
			velocity({'rotateY':'180deg'})
		;
		
		(function(){
			
			var list = [];
			$(document).on('touchstart',body,function(e){
				list = [];
			});
			$(document).on('touchmove',body,function(e){
				var x = ut.client.unX(e.originalEvent.touches[0].pageX).toFixed(1);
				var y = ut.client.unY(e.originalEvent.touches[0].pageY).toFixed(1);
				list.push(x+'-'+y);
	//			ut.drawPoint(x,y);
			});
			$(document).on('touchend',body,function(e){
				console.log(list.toString());
			});
			
		})();
		
//		$(document).on('touchstart',body,function(e){
//			var x = ut.client.unX(e.originalEvent.touches[0].pageX);
//			var y = ut.client.unY(e.originalEvent.touches[0].pageY);
//			console.log(y);
//			ut.drawPoint(x,y);
//		});

		function autoSport(arr){
			var $ele = $('.circle') ;
			
			var i = 0;
			window.requestAnimationFrame(function(){
				set($ele,arr[i]) ;
				i = i+1; ;
				if(arr[i]){
					requestAnimationFrame(arguments.callee)
				}
			});
			
			
			function set($ele,arr){
				var arr = arr.split('-');
				$ele.css({'top':arr[1]+'px','left':arr[0]+'px'});
			}
		};
//		var arr = "140.71987480438185-165.04225352112675,128.70109546165884-168.59154929577466,112.67605633802818-175.69014084507043,96.6510172143975-182.7887323943662,90.641627543036-188.11267605633802,88.63849765258216-195.2112676056338,86.63536776212833-204.08450704225353,84.63223787167449-211.1830985915493,84.63223787167449-216.50704225352112,82.62910798122066-220.05633802816902,82.62910798122066-225.38028169014083,84.63223787167449-234.25352112676057,84.63223787167449-241.35211267605635,86.63536776212833-248.45070422535213,92.64475743348983-260.8732394366197,100.65727699530517-275.07042253521126,104.66353677621284-283.943661971831,110.67292644757434-289.2676056338028,120.68857589984351-299.9154929577465,126.69796557120502-303.46478873239437,132.7073552425665-308.7887323943662,140.71987480438185-310.5633802816901,154.7417840375587-314.11267605633805,164.75743348982786-315.88732394366195,176.77621283255087-317.6619718309859,192.80125195618155-317.6619718309859,214.83568075117373-315.88732394366195,228.85758998435054-314.11267605633805,238.8732394366197-308.7887323943662,250.89201877934272-303.46478873239437,266.9170579029734-298.14084507042253,288.95148669796555-285.71830985915494,298.96713615023475-278.61971830985914,304.9765258215962-275.07042253521126,310.98591549295776-267.9718309859155,321.0015649452269-259.0985915492958,331.0172143974961-250.22535211267606,339.02973395931144-244.90140845070422,345.0391236306729-239.57746478873239,351.04851330203445-236.0281690140845,361.0641627543036-232.4788732394366,369.07668231611893-230.70422535211267,375.08607198748047-227.1549295774648,387.1048513302035-225.38028169014083,397.1205007824726-223.6056338028169,407.1361502347418-221.83098591549296,419.15492957746477-221.83098591549296,431.1737089201878-221.83098591549296,441.189358372457-223.6056338028169,449.2018779342723-228.92957746478874,455.2112676056338-232.4788732394366,459.21752738654146-237.80281690140845,467.2300469483568-250.22535211267606,475.24256651017214-257.32394366197184,483.2550860719875-269.7464788732394,493.2707355242567-289.2676056338028,499.28012519561815-298.14084507042253,503.2863849765258-305.23943661971833,505.2895148669797-314.11267605633805,507.2926447574335-317.6619718309859,507.2926447574335-324.76056338028167,507.2926447574335-328.3098591549296,507.2926447574335-333.63380281690144,507.2926447574335-342.50704225352115,507.2926447574335-347.830985915493,507.2926447574335-351.38028169014086,507.2926447574335-354.92957746478874,505.2895148669797-360.2535211267606,501.283255086072-367.3521126760563,497.27699530516435-374.4507042253521,491.2676056338028-379.77464788732397,487.26134585289515-386.8732394366197,481.25195618153367-393.9718309859155,475.24256651017214-399.2957746478873,469.23317683881066-404.61971830985914,457.21439749608766-413.49295774647885,447.19874804381845-420.59154929577466,439.1862284820031-424.14084507042253,427.1674491392801-429.46478873239437,413.1455399061033-434.7887323943662,391.11111111111114-443.6619718309859,375.08607198748047-448.98591549295776,359.0610328638498-454.3098591549296,345.0391236306729-459.63380281690144,333.0203442879499-463.1830985915493,323.00469483568077-466.7323943661972,306.9796557120501-473.830985915493,290.9546165884194-482.7042253521127,270.92331768388107-496.90140845070425,258.90453834115806-505.77464788732397,252.89514866979655-511.0985915492958,250.89201877934272-514.6478873239437,244.88262910798122-521.7464788732394,244.88262910798122-527.0704225352113,242.87949921752738-534.169014084507,240.87636932707355-541.2676056338029,238.8732394366197-550.1408450704225,236.87010954616588-564.3380281690141,234.86697965571204-571.4366197183099,234.86697965571204-580.3098591549295,234.86697965571204-585.6338028169014,236.87010954616588-592.7323943661972,240.87636932707355-601.6056338028169,244.88262910798122-606.9295774647887,246.88575899843505-610.4788732394367,248.88888888888889-615.8028169014085,256.90140845070425-624.6760563380282,260.9076682316119-630,266.9170579029734-635.3239436619718,272.92644757433493-638.8732394366198,280.93896713615027-647.7464788732394,286.94835680751174-653.0704225352113,294.9608763693271-658.3943661971831,306.9796557120501-663.7183098591549,312.98904538341156-665.4929577464789,321.0015649452269-665.4929577464789,333.0203442879499-667.2676056338029,351.04851330203445-667.2676056338029,377.0892018779343-667.2676056338029,393.11424100156495-667.2676056338029,405.13302034428796-665.4929577464789,413.1455399061033-665.4929577464789,419.15492957746477-667.2676056338029,425.1643192488263-670.8169014084507,433.17683881064164-676.1408450704225,441.189358372457-681.4647887323944,449.2018779342723-685.0140845070423,457.21439749608766-693.887323943662,461.2206572769953-699.2112676056338,463.22378716744913-704.5352112676056,465.226917057903-708.0845070422536,467.2300469483568-715.1830985915493,469.23317683881066-720.5070422535211,471.23630672926447-724.056338028169,471.23630672926447-729.3802816901408,477.245696400626-750.6760563380282,479.2488262910798-763.0985915492957,479.2488262910798-770.1971830985916,479.2488262910798-773.7464788732394,477.245696400626-780.8450704225352,473.23943661971833-786.169014084507,467.2300469483568-791.4929577464789,459.21752738654146-798.5915492957746,449.2018779342723-807.4647887323944,439.1862284820031-812.7887323943662,429.170579029734-816.3380281690141,419.15492957746477-821.661971830986,403.12989045383415-830.5352112676056,391.11111111111114-834.0845070422536,375.08607198748047-839.4084507042254,355.0547730829421-846.5070422535211,345.0391236306729-848.2816901408451,335.0234741784038-850.056338028169,325.0078247261346-853.6056338028169,310.98591549295776-855.3802816901408,290.9546165884194-858.9295774647887,272.92644757433493-860.7042253521126,254.8982785602504-860.7042253521126,236.87010954616588-864.2535211267606,214.83568075117373-867.8028169014085,204.82003129890455-869.5774647887324,196.80751173708921-869.5774647887324,180.78247261345854-873.1267605633802,168.76369327073553-874.9014084507043,158.74804381846636-878.4507042253521,150.73552425665102-882,140.71987480438185-885.5492957746479,130.70422535211267-887.3239436619718,126.69796557120502-889.0985915492957,122.69170579029735-890.8732394366198,118.68544600938968-892.6478873239437,114.67918622848201-894.4225352112676,112.67605633802818-894.4225352112676".split(',');
//		autoSport(arr);
	});
  </script>
</html>
