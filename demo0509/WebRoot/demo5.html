<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta http-equiv="x-dns-prefetch-control" content="on">

	<title>demo 范例</title>
	<script type="text/javascript" src='js/require.js'></script>
	<script type="text/javascript" src='js/jquery-1.10.2.min.js'></script>
	<script type="text/javascript" src='js/utils.js'></script>
	<link rel='stylesheet' href='css/common.css'></link>
	<!--  -->

</head>

<style type="text/css" id='style'>
	
	body{
		background:black;
	}
	.gbox{
		background : wheat ;
	}
	

</style>
<body>

			
		
</body>

<script id="baseTmpl" type="text/x">
	<div class='full contentTp' >
		<!-- <iframe src='./js/component/comp1.html' id='myIframe'
			style='width:100%;height:50%;border:none;'
		></iframe> -->
	</div>
</script>

	<script type="text/javascript">

		ut.loadConponent = function(conponentUrl){
			
			loadUrl( conponentUrl || 'tmpl.html');
			function loadUrl(url){
				$.ajax({
					method : 'post',
					url : url,
					timeout: 20000,
					dataTyp : "text" ,
					success : function(data){
						parseData(data);
					},
					error : function(XMLHttpRequest, textStatus, errorThrown){
						console.error('组件加载失败');
						console.log(textStatus);
					}
				});
			}
			function parseData(data){
				var ele = makeStyle();
				$.each($(data),function(index,value){
					var $ele = $(value);
					if($ele.is('script')){
						$.template($ele.attr('id'),$ele.html());
					}else if($ele.is('style')){
						$ele.appendTo(ele);
					}
				});
			}
			function makeStyle(){
				var head = document.getElementsByTagName('head')[0];
				var ele = document.createElement('style');
				ele.type='text/css';
				head.appendChild(ele);
				return ele ;
			}
			
		} ;
		
		
		ut.ready(function(){
			ut.client.setBox(720);
			console.log('every thing is ok');
			
			$('#baseTmpl').tmpl().appendTo(body) ;
		
			ut.loadConponent();
			
			setTimeout(function(){
				$.tmpl('testTmpl',{msg:'这一定能成功哦'}).appendTo('.contentTp');
			},4000)
			
				
			
			
			
		});


	</script>
</html>





